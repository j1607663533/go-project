# 系统管理页面使用指南

## 概述

已创建三个系统管理页面，用于管理菜单、角色和用户。

## 页面列表

### 1. 菜单管理 (`/system/menus`)

**文件**: `src/pages/SystemMenus.jsx`

**功能**:

- ✅ 查看所有菜单（树形结构显示）
- ✅ 新建菜单（支持顶级菜单和子菜单）
- ✅ 编辑菜单
- ✅ 删除菜单
- ✅ 菜单排序
- ✅ 图标选择
- ✅ 隐藏/显示设置

**字段说明**:

- **父菜单**: 选择父菜单，0 表示顶级菜单
- **菜单名称**: 显示在侧边栏的名称
- **路由路径**: 前端路由路径，如 `/system/users`
- **组件路径**: 对应的组件名称，如 `SystemUsers`
- **图标**: 菜单图标（Ant Design 图标）
- **排序**: 数字越小越靠前
- **类型**: 菜单（显示在侧边栏）或按钮（权限控制）
- **是否隐藏**: 隐藏的菜单不显示在侧边栏

### 2. 角色管理 (`/system/roles`)

**文件**: `src/pages/SystemRoles.jsx`

**功能**:

- ✅ 查看所有角色
- ✅ 新建角色
- ✅ 编辑角色（超级管理员除外）
- ✅ 删除角色（超级管理员除外）
- ✅ 为角色分配菜单权限
- ✅ 查看角色拥有的菜单数量

**字段说明**:

- **角色名称**: 角色的显示名称
- **角色编码**: 角色的唯一标识，只能包含小写字母和下划线
- **描述**: 角色的详细描述
- **超级管理员**: 系统内置，不能删除和修改

**特殊说明**:

- 超级管理员角色受保护，不能编辑、删除或修改菜单权限
- 分配菜单时使用树形选择器，支持批量选择

### 3. 用户管理 (`/system/users`)

**文件**: `src/pages/SystemUsers.jsx`

**功能**:

- ✅ 查看所有用户
- ✅ 编辑用户信息
- ✅ 为用户分配角色
- ✅ 查看用户头像、昵称、邮箱等信息

**字段说明**:

- **角色**: 用户所属的角色
- **昵称**: 用户昵称
- **邮箱**: 用户邮箱地址

## 使用流程

### 创建完整的权限体系

1. **创建菜单**

   - 进入"菜单管理"页面
   - 点击"新建菜单"
   - 填写菜单信息（名称、路径、组件、图标等）
   - 保存

2. **创建角色**

   - 进入"角色管理"页面
   - 点击"新建角色"
   - 填写角色信息（名称、编码、描述）
   - 保存

3. **分配菜单权限**

   - 在角色列表中找到目标角色
   - 点击"分配菜单"
   - 在树形选择器中勾选该角色可以访问的菜单
   - 保存

4. **分配用户角色**
   - 进入"用户管理"页面
   - 找到目标用户，点击"编辑"
   - 选择角色
   - 保存

## 权限说明

### 菜单访问权限

- 用户登录后，系统根据用户角色返回可访问的菜单
- 前端侧边栏只显示用户有权限的菜单
- 用户只能访问被分配的菜单对应的页面

### 超级管理员

- 拥有所有菜单的访问权限
- 不能被删除
- 不能被修改
- 菜单权限不能被修改

### 普通用户

- 默认只有"首页"和"订单管理"权限
- 可以通过角色管理分配更多权限

## API 接口

### 菜单接口

```
GET    /api/v1/menus/tree      - 获取菜单树
GET    /api/v1/menus/user      - 获取当前用户菜单
POST   /api/v1/menus           - 创建菜单
PUT    /api/v1/menus/:id       - 更新菜单
DELETE /api/v1/menus/:id       - 删除菜单
```

### 角色接口

```
GET    /api/v1/roles           - 获取所有角色
GET    /api/v1/roles/:id       - 获取角色详情
POST   /api/v1/roles           - 创建角色
PUT    /api/v1/roles/:id       - 更新角色
DELETE /api/v1/roles/:id       - 删除角色
POST   /api/v1/roles/:id/menus - 为角色分配菜单
```

### 用户接口

```
GET    /api/v1/users           - 获取所有用户
PUT    /api/v1/users/:id       - 更新用户
```

## 注意事项

1. **菜单路径**: 必须与前端路由配置一致
2. **组件名称**: 必须与实际的组件文件名一致
3. **角色编码**: 创建后不能修改，请谨慎填写
4. **超级管理员**: 系统内置，不要尝试删除或修改
5. **菜单删除**: 删除父菜单前，请先删除所有子菜单

## 示例

### 创建一个"编辑"角色

1. 创建角色

   - 名称: 编辑
   - 编码: editor
   - 描述: 内容编辑角色

2. 分配菜单

   - 首页
   - 订单管理

3. 分配给用户
   - 在用户管理中选择用户
   - 将角色改为"编辑"

### 添加新功能模块

1. 创建菜单

   - 名称: 产品管理
   - 路径: /products
   - 组件: Products
   - 图标: ShoppingCartOutlined

2. 创建对应的前端组件

   - 文件: `src/pages/Products.jsx`

3. 添加路由配置

   - 在 `src/main.jsx` 中添加路由

4. 分配给角色
   - 在角色管理中为相应角色分配该菜单

## 技术栈

- **UI 框架**: Ant Design
- **表格**: Table 组件
- **表单**: Form 组件
- **树形选择**: Tree 组件
- **状态管理**: React Hooks (useState, useEffect)
- **HTTP 请求**: Axios

## 文件结构

```
src/
├── pages/
│   ├── SystemMenus.jsx   # 菜单管理
│   ├── SystemRoles.jsx   # 角色管理
│   └── SystemUsers.jsx   # 用户管理
├── api/
│   ├── menu.js          # 菜单 API
│   ├── role.js          # 角色 API
│   └── auth.js          # 用户 API
└── main.jsx             # 路由配置
```
